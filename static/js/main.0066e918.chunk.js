(this["webpackJsonpvaccine-tracker-wa"]=this["webpackJsonpvaccine-tracker-wa"]||[]).push([[0],{29:function(t,e,a){},30:function(t,e,a){},50:function(t,e,a){"use strict";a.r(e);var s=a(1),i=a(0),n=a.n(i),r=a(18),c=a.n(r),l=(a(29),a(19)),o=a(20),h=a(23),d=a(21),u=(a(30),a(7)),p=a(22),b=a(8),m=a.n(b),f=(a(49),"https://wa-vaccine.xvm.mit.edu:3075"),j=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(){var t;return Object(l.a)(this,a),(t=e.call(this)).state={readyState:0,shouldUpdateTable:!0},t}return Object(o.a)(a,[{key:"fetchJsonFiles",value:function(){var t=this;fetch(f+"/api/locations",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){return t.json()})).then((function(e){for(var a={},s=e.locations,i=0;i<s.length;i++){a[s[i].name+" "+s[i].url+" "+s[i].address+" "+s[i].city+" "+s[i].county]=s[i]}t.setState({locationDictionary:a,readyState:t.state.readyState+1})})),m.a.get(f+"/api/statuses",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){t.setState({statusData:e.data,readyState:t.state.readyState+1})})),m.a.get(f+"/api/last_update",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){t.setState({lastWebsiteUpdateTime:new Date(e.data.time),readyState:t.state.readyState+1})}))}},{key:"updateDataAndState",value:function(){var t=this;if(3===this.state.readyState){var e=new Date;if(m.a.get(f+"/api/last_update",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){var a=new Date(e.data.time);a-t.state.lastWebsiteUpdateTime!==0&&(t.setState({readyState:0,shouldUpdateTable:!0,lastWebsiteUpdateTime:a}),t.fetchJsonFiles())})),this.state.shouldUpdateTable){console.log("UPDATE TABLE");var a=[];this.setState({available:0});for(var s=this.state.statusData.statuses,i=0;i<s.length;i++){var n=s[i].serialized;if("AVAILABLE"===n.availability){this.setState({available:this.state.available+1});var r=this.state.locationDictionary[s[i].loc],c=r.county+"\n"+(""===r.address?r.city:r.address)+"\n"+r.phoneNumber+"\n"+r.email;a.push(this.getCard(i+1,r.name,c,n.currentUrl))}}this.setState({lastRescrapeRenderTime:Date.parse(this.state.lastWebsiteUpdateTime),status:a,shouldUpdateTable:!1})}var l,o,h=Math.floor((e-this.state.lastWebsiteUpdateTime)/1e3),d=Math.floor(h/60),u=Math.floor(d/60);l=h<60?"Last updated "+h+" second"+(1===h?"":"s")+" ago":d<60?"Last updated "+d+" minute"+(1===d?"":"s")+" ago":"Last updated "+u+" hour"+(1===u?"":"s")+" ago",o=0===this.state.available?"There are currently no locations that are accepting appointments.":1===this.state.available?"There is currently 1 location that is accepting appointments:":"There are currently "+this.state.available+" locations that are accepting appointments:",this.setState({lastUpdateTimeText:l,apptText:o})}}},{key:"componentDidMount",value:function(){var t=this;this.fetchJsonFiles(),this.timerID=setInterval((function(){t.updateDataAndState()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsxs)("header",{className:"App-header",children:[Object(s.jsx)("br",{}),Object(s.jsx)("h1",{style:{fontSize:"1.8em"},children:"Where can I get the vaccine?"}),Object(s.jsxs)("h3",{style:{fontSize:"0.7em"},children:["WASHINGTON STATE",Object(s.jsx)("br",{}),"Currently available for ages 65 years and older."]}),Object(s.jsx)("br",{}),Object(s.jsx)("p",{style:{fontSize:"1em"},children:3!==this.state.readyState?"Loading...":this.state.apptText})]}),Object(s.jsx)("body",{children:this.state.status}),Object(s.jsx)("p",{style:{fontSize:"1em",color:"#cccccc"},children:this.state.lastUpdateTimeText})]})}},{key:"getCard",value:function(t,e,a,i){return Object(s.jsx)(u.a,{style:{width:"95%",marginLeft:"2.5%",marginRight:"2.5%",marginBottom:"0.8rem"},children:Object(s.jsxs)(u.a.Body,{children:[Object(s.jsxs)(u.a.Title,{style:{fontWeight:"bold"},children:[t,". ",e]}),Object(s.jsx)(u.a.Text,{style:{marginLeft:"1.5rem",lineHeight:"1rem"},children:a.split("\n").map((function(t,e){return Object(s.jsx)("p",{children:t},e)}))}),Object(s.jsx)(p.a,{style:{width:"100%"},variant:"primary",target:"_blank",href:i,children:"Visit site"})]})})}}]),a}(n.a.Component),y=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,51)).then((function(e){var a=e.getCLS,s=e.getFID,i=e.getFCP,n=e.getLCP,r=e.getTTFB;a(t),s(t),i(t),n(t),r(t)}))};c.a.render(Object(s.jsx)(n.a.StrictMode,{children:Object(s.jsx)(j,{})}),document.getElementById("root")),y()}},[[50,1,2]]]);
//# sourceMappingURL=main.0066e918.chunk.js.map